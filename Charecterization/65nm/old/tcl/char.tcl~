set rundir $env(PWD)

exec mkdir -p ${rundir}/LDB
exec mkdir -p ${rundir}/LIBRARY
exec mkdir -p ${rundir}/DATASHEET

set_var slew_lower_rise 0.2
set_var slew_upper_rise 0.8
set_var slew_lower_fall 0.2
set_var slew_upper_fall 0.8

set_var measure_slew_lower_rise 0.2
set_var measure_slew_upper_rise 0.8
set_var measure_slew_lower_fall 0.2
set_var measure_slew_upper_fall 0.8

set_var max_transition 61.75e-09

define_template -type delay -index_1 {61.75 158.9 794.1} -index_2 {18.732 37.464 74.928} delay_3x3
define_template -type power -index_1 {61.75 158.9 794.1} -index_2 {18.732 37.464 74.928} power_3x3
define_template -type constraint -index_1 {61.75 158.9 794.1} -index_2 {18.732 37.464 74.928} constraint_3x3

set model "/home/TSMC/Desktop/UMC180/Designkits/Cadence_6.1/lowpower/liberate/umc.scs"

set_operating_condition -voltage 0.3 -temp 25

set_var extsim_model_include $model

define_leafcell -element -type nmos -pin_position {0 1 2 3}  N_18_MM
define_leafcell -element -type pmos -pin_position {0 1 2 3}  P_18_MM

read_spice -format spectre {/home/TSMC/Desktop/UMC180/Designkits/Cadence_6.1/lowpower/liberate/umc.scs}
read_spice {netlist/INVX1.sp netlist/AND2X1.sp netlist/NAND2X1.sp netlist/OR2X1.sp netlist/NOR2X1.sp netlist/XOR2X1.sp netlist/XNOR2X1.sp}

define_cell \
	-input {in} \
	-output {out} \
	-delay delay_3x3 \
	-power power_3x3 \
	-constraint constraint_3x3 \
	{INVX1}

define_cell \
	-input {a b} \
	-output {y} \
	-delay delay_3x3 \
	-power power_3x3 \
	-constraint constraint_3x3 \
	{NAND2X1 NOR2X1 AND2X1 OR2X1 XOR2X1 XNOR2X1}

char_library -extsim spectre
write_ldb ${rundir}/LDB/lowpower.ldb
write_library -overwrite ${rundir}/LIBRARY/lowpower.lib
write_datasheet -format text ${rundir}/DATASHEET/lowpower.txt
write_datasheet -format html ${rundir}/DATASHEET/lowpower.html
